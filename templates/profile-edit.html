<% include header %>
<style><% include ../assets/css/profile-edit.css %></style>

<div class="api-page">
  <main role="main" id="main-content" class="cd-container">
    <div class="cd-layout-content">
      <form action="/profile/edit" method="POST" class="profile profile--edit [ flow ]">
        <h1 class="page-header__heading">Edit profile</h1>

        <% include alert.html %>

        <div class="form-item">
          <label for="profile-given_name">Given Name:</label>
          <input type="text" id="profile-given_name" name="given_name" value="<%= user.given_name %>" required>
        </div>
        <div class="form-item">
          <label for="profile-family_name">Family name:</label>
          <input type="text" id="profile-family_name" name="family_name" value="<%= user.family_name %>" required>
        </div>
        <div class="form-item">
          <label for="">Email addresses:</label>
          <ul class="profile__emails">
            <%
              user.emails.forEach(function(email) {
                if (email.email === user.email) {
            %>
              <li class="profile__email email">
                <span class="email__address"><%= user.email %></span><br>
                <span class="email__status">Status: <em><strong>Primary</strong></em></span>
              </li>
            <% } else { %>
              <li class="profile__email email">
                <span class="email__address"><%= email.email %></span><br>
                <span class="email__status">Status: <em><%= email.validated === true ? 'confirmed' : 'not confirmed' %></em></span>
              </li>
            <%
                }
              });
            %>
          </ul>
        </div>
        <div class="form-actions">
          <button type="submit" class="cd-button cd-button--bold cd-button--uppercase">Save Profile</button>
        </div>
      </form>
    </div>
  </main>
</div>
<% include footer %>
